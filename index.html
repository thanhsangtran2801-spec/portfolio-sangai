<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SANGAI Portfolio – Auto Gallery</title>

  <!--
    QUY ƯỚC ĐẶT TÊN FILE ĐỂ AUTO LOAD:
    1) Ảnh hoạt động:  images/activities/training-01.jpg … training-30.jpg
    2) Ảnh sản phẩm:   images/products/product-01.jpg  … product-30.jpg
    3) Video:          videos/video-01.mp4 … video-20.mp4

    Chỉ cần đặt tên đúng mẫu + upload vào đúng thư mục là web tự hiển thị.
    File nào không tồn tại sẽ được JS tự ẩn, không báo lỗi.
  -->

  <style>
    :root {
      --bg-dark: #020617;
      --bg-card: #020c1b;
      --bg-card-soft: #02101f;
      --text-main: #e5e7eb;
      --text-sub: #9ca3af;
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.14);
      --border-soft: rgba(148, 163, 184, 0.25);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #022c22 0, #020617 40%, #000 100%);
      color: var(--text-main);
      min-height: 100vh;
    }

    header {
      padding: 28px 18px 12px;
      text-align: center;
    }

    header h1 {
      font-size: 1.8rem;
      letter-spacing: 0.12em;
      color: #a5b4fc;
      text-transform: uppercase;
    }

    header p {
      margin-top: 8px;
      color: var(--text-sub);
      font-size: 0.92rem;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(15, 118, 110, 0.3);
      border: 1px solid rgba(45, 212, 191, 0.4);
      margin-bottom: 10px;
      font-size: 0.8rem;
      color: #a5f3fc;
    }

    .container {
      max-width: 1120px;
      margin: 0 auto 60px;
      padding: 0 18px 40px;
    }

    .section {
      background: radial-gradient(circle at top left, #022c3a 0, var(--bg-card) 38%, #020617 100%);
      border-radius: 24px;
      padding: 24px 22px 26px;
      margin-top: 20px;
      border: 1px solid var(--border-soft);
      box-shadow: 0 20px 60px rgba(15, 23, 42, 0.9);
    }

    .section + .section {
      margin-top: 26px;
    }

    .section-title {
      font-size: 1.2rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--accent);
      margin-bottom: 10px;
    }

    .section-sub {
      font-size: 0.9rem;
      color: var(--text-sub);
      line-height: 1.6;
      margin-bottom: 8px;
    }

    .sub-heading {
      margin-top: 14px;
      font-weight: 600;
      font-size: 0.95rem;
      color: #e5e7eb;
    }

    .note {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-top: 4px;
    }

    /* Masonry-style gallery */
    .gallery {
      margin-top: 18px;
      column-count: 3;
      column-gap: 14px;
    }

    @media (max-width: 960px) {
      .gallery { column-count: 2; }
    }

    @media (max-width: 640px) {
      .gallery { column-count: 1; }
    }

    .media-item {
      display: inline-block;
      width: 100%;
      margin: 0 0 14px;
      break-inside: avoid;
      background: var(--bg-card-soft);
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(15, 23, 42, 0.9);
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.9);
    }

    .media-thumb {
      display: block;
      width: 100%;
      height: auto;
      max-height: 360px;
      object-fit: cover;
      background: #020617;
    }

    .media-meta {
      padding: 8px 10px 10px;
      font-size: 0.8rem;
      color: var(--text-sub);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
    }

    .media-meta span.name {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .tag {
      border-radius: 999px;
      padding: 2px 8px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 0.72rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #cbd5f5;
    }

    .tool-card {
      margin-top: 22px;
      background: radial-gradient(circle at top right, #0f172a 0, #020617 55%);
      border-radius: 18px;
      padding: 16px 16px 18px;
      border: 1px solid rgba(148, 163, 184, 0.4);
    }

    .tool-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .tool-desc {
      font-size: 0.85rem;
      color: var(--text-sub);
      margin-bottom: 10px;
    }

    .tool-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
      margin-bottom: 6px;
    }

    input, button {
      font-family: inherit;
    }

    .input-sm {
      padding: 6px 9px;
      border-radius: 8px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      background: #020617;
      color: var(--text-main);
      font-size: 0.82rem;
      min-width: 0;
    }

    .btn {
      padding: 6px 12px;
      border-radius: 999px;
      border: none;
      font-size: 0.8rem;
      font-weight: 500;
      background: linear-gradient(to right, #22c55e, #4ade80);
      color: #022c22;
      cursor: pointer;
      white-space: nowrap;
    }

    .btn:hover {
      opacity: 0.9;
    }

    footer {
      text-align: center;
      padding: 10px 16px 26px;
      font-size: 0.78rem;
      color: #6b7280;
    }
  </style>
</head>

<body>
  <header>
    <div class="badge">
      <span>⚡</span>
      <span>SANGAI • AUTO PORTFOLIO • LEVEL 2.5</span>
    </div>
    <h1>SANGAI PORTFOLIO</h1>
    <p>Thư viện ảnh & video tự động – chỉ cần đặt tên file đúng quy ước, website lo phần còn lại.</p>
  </header>

  <main class="container">

    <!-- HÌNH ẢNH HOẠT ĐỘNG -->
    <section class="section">
      <h2 class="section-title">HÌNH ẢNH HOẠT ĐỘNG SANGAI</h2>
      <p class="section-sub">
        Thư viện ảnh hoạt động tự động hiển thị dựa trên các file tồn tại thật trong thư mục
        <code>images/activities</code>. Chỉ cần đặt tên <strong>training-01.jpg, training-02.jpg, …</strong> là website sẽ
        tự dò, tự hiển thị; ảnh không có thật sẽ tự ẩn.
      </p>
      <p class="sub-heading">Thư viện ảnh dạng Masonry</p>
      <p class="note">
        Khu vực này mô phỏng kiểu Pinterest. JS sẽ tự quét lần lượt
        <code>training-01.jpg → training-30.jpg</code> trong thư mục <code>images/activities</code>.
        Khi anh thêm ảnh mới, chỉ cần tiếp tục tên <code>training-04.jpg, training-05.jpg, …</code>.
      </p>

      <div id="activities-gallery" class="gallery"></div>
    </section>

    <!-- SẢN PHẨM & ẤN PHẨM -->
    <section class="section">
      <h2 class="section-title">SẢN PHẨM & ẤN PHẨM SANGAI</h2>
      <p class="section-sub">
        Bìa sách, khóa học, tài liệu chuyên sâu, landing page, toolkit… sẽ tự động hiển thị dựa trên các file ở thư mục
        <code>images/products</code> đặt tên <strong>product-01.jpg, product-02.jpg, …</strong>.
      </p>
      <p class="sub-heading">Thư viện ấn phẩm mở rộng</p>
      <p class="note">
        JS sẽ dò từ <code>product-01.jpg → product-30.jpg</code>. Không cần sửa code khi bổ sung; chỉ cần tuân thủ quy tắc đặt tên.
      </p>

      <div id="products-gallery" class="gallery"></div>
    </section>

    <!-- VIDEO DEMO -->
    <section class="section">
      <h2 class="section-title">VIDEO DEMO & CLIP GIỚI THIỆU</h2>
      <p class="section-sub">
        Video giới thiệu khóa học, tóm tắt portfolio, TVC ngắn… đặt trong thư mục
        <code>videos</code> với tên <strong>video-01.mp4, video-02.mp4, …</strong>.
      </p>
      <p class="note">
        Hệ thống sẽ dò <code>video-01.mp4 → video-20.mp4</code>. Nên giữ dung lượng video hợp lý để website tải nhanh.
      </p>

      <div id="videos-gallery" class="gallery"></div>
    </section>

    <!-- MINI TOOL RESIZE ẢNH -->
    <section class="section">
      <h2 class="section-title">TOOL MINI: AUTO-RESIZE ẢNH CHUẨN PORTFOLIO</h2>
      <p class="section-sub">
        Dùng nhanh trước khi upload ảnh lên repo. Chọn ảnh & chiều rộng chuẩn, tool sẽ tạo file mới đã resize cho anh tải về.
      </p>

      <div class="tool-card">
        <div class="tool-title">Quy ước kích thước gợi ý</div>
        <p class="tool-desc">
          • Banner chính: <strong>1920px</strong><br/>
          • Ảnh hoạt động: <strong>1280px</strong><br/>
          • Ảnh thumb/video cover: <strong>720px</strong>
        </p>

        <div class="tool-row">
          <input id="resize-file" type="file" accept="image/*" class="input-sm" />
          <input id="resize-width" type="number" class="input-sm" value="1280" min="320" style="width:90px" />
          <button class="btn" type="button" onclick="resizeImage()">Resize & tải về</button>
        </div>
        <p class="note">
          Ảnh sau khi resize sẽ tải xuống máy với tên bắt đầu bằng <code>resized_</code>.  
          Sau đó anh chỉ cần đổi tên theo quy ước (vd: <code>training-05.jpg</code>) rồi upload lên GitHub.
        </p>
      </div>
    </section>

  </main>

  <footer>
    SANGAI Portfolio • Auto Gallery • Built for GitHub Pages – chỉ cần đặt tên file đúng quy ước, không cần sửa code.
  </footer>

  <script>
    /**
     * Tạo 1 ô media (ảnh / video) + meta.
     * Nếu file 404 → onerror sẽ ẩn cả block, nên không thấy ô bị lỗi.
     */
    function createMediaItem(path, filename, containerId, kind) {
      const container = document.getElementById(containerId);
      if (!container) return;

      const wrapper = document.createElement("div");
      wrapper.className = "media-item";

      let media;
      if (kind === "video") {
        media = document.createElement("video");
        media.controls = true;
        media.playsInline = true;
        media.className = "media-thumb";
      } else {
        media = document.createElement("img");
        media.loading = "lazy";
        media.decoding = "async";
        media.className = "media-thumb";
      }

      media.src = path;
      media.onerror = function () {
        wrapper.style.display = "none";
      };

      const meta = document.createElement("div");
      meta.className = "media-meta";

      const nameSpan = document.createElement("span");
      nameSpan.className = "name";
      nameSpan.textContent = filename;

      const tag = document.createElement("span");
      tag.className = "tag";
      tag.textContent = kind === "video" ? "VIDEO" : "HÌNH ẢNH";

      meta.appendChild(nameSpan);
      meta.appendChild(tag);

      wrapper.appendChild(media);
      wrapper.appendChild(meta);

      container.appendChild(wrapper);
    }

    /**
     * Dò tuần tự theo quy ước tên file.
     * Ví dụ: prefix="training-", ext=".jpg", max=30 → training-01.jpg…training-30.jpg
     */
    function scanSeries(options) {
      const { folder, prefix, ext, max, containerId, kind } = options;
      for (let i = 1; i <= max; i++) {
        const num = i < 10 ? "0" + i : "" + i;
        const filename = prefix + num + ext;
        const fullPath = folder + filename;
        createMediaItem(fullPath, filename, containerId, kind);
      }
    }

    // HÌNH HOẠT ĐỘNG
    scanSeries({
      folder: "images/activities/",
      prefix: "training-",
      ext: ".jpg",
      max: 30,
      containerId: "activities-gallery",
      kind: "image",
    });

    // SẢN PHẨM
    scanSeries({
      folder: "images/products/",
      prefix: "product-",
      ext: ".jpg",
      max: 30,
      containerId: "products-gallery",
      kind: "image",
    });

    // VIDEO
    scanSeries({
      folder: "videos/",
      prefix: "video-",
      ext: ".mp4",
      max: 20,
      containerId: "videos-gallery",
      kind: "video",
    });

    // TOOL MINI: RESIZE ẢNH
    function resizeImage() {
      const fileInput = document.getElementById("resize-file");
      const widthInput = document.getElementById("resize-width");
      const file = fileInput.files[0];
      const targetWidth = parseInt(widthInput.value, 10);

      if (!file) {
        alert("Anh hãy chọn 1 file ảnh trước.");
        return;
      }
      if (!targetWidth || targetWidth <= 0) {
        alert("Chiều rộng không hợp lệ.");
        return;
      }

      const img = new Image();
      img.onload = function () {
        const scale = targetWidth / img.width;
        const targetHeight = Math.round(img.height * scale);

        const canvas = document.createElement("canvas");
        canvas.width = targetWidth;
        canvas.height = targetHeight;

        const ctx = canvas.getContext("2d");
        ctx.drawImage(img, 0, 0, targetWidth, targetHeight);

        const link = document.createElement("a");
        link.download = "resized_" + file.name.replace(/\.[^.]+$/, ".jpg");
        link.href = canvas.toDataURL("image/jpeg", 0.9);
        link.click();
      };
      img.src = URL.createObjectURL(file);
    }

    // Đưa hàm ra global scope để HTML gọi được
    window.resizeImage = resizeImage;
  </script>
</body>
</html>
